
// Облегченные упражнения
let exercise_1 = {
    name : "Подтягивания к столбу",
    type : "Подтягивания",
    img : "img/exercises/exercise_1.png",
    difficult : 'Облегченное упражнение',
    equipment : 'Вертикальный столб',
    musclels : '<path id="1"  d="M145.7,19.7c-8.5,5.3-17,10.5-25.6,15.8c8.5,0.2,17,0.4,25.6,0.5C145.7,30.6,145.7,25.2,145.7,19.7z" fill="#FC0303" stroke="#010101" stroke-miterlimit="10"/> <path id="2"  d="M167.1,19.1c8,5.3,16,10.5,24,15.8c-8,0.2-16,0.4-24,0.5C167.1,30,167.1,24.5,167.1,19.1z" fill="#FC0303" stroke="#010101" stroke-miterlimit="10"/><path id="3"  d="M292.1,13.4c-10.9,6.8-21.8,13.6-32.8,20.4c8.5,0.2,17,0.4,25.6,0.5c2.3-3.6,4.6-7.2,6.9-10.8C291.9,20.2,292,16.8,292.1,13.4z" fill="#FC0303" stroke="#010101" stroke-miterlimit="10"/><path id="4"  d="M293.4,13.4c10.9,6.8,21.8,13.6,32.8,20.4c-8.5,0.2-17,0.4-25.6,0.5c-2.3-3.6-4.6-7.2-6.9-10.8C293.6,20.2,293.5,16.8,293.4,13.4z" fill="#FC0303" stroke="#010101" stroke-miterlimit="10"/>',
    about : '● Повисните на турнике.<br>● Поднимите ноги чуть выше уголка. Ноги могут быть чуть согнуты в коленях - это вопрос растяжки.<br>● После преодоления отметки в 90 градусов, сосредоточьтесь на скручивании.<br>● Опустите ноги в начальное положение. Контролируйте спуск.<br>● Не используя раскачку - повторите движение.<br>● Повисните на турнике.<br>● Поднимите ноги чуть выше уголка. Ноги могут быть чуть согнуты в коленях - это вопрос растяжки.<br>● После преодоления отметки в 90 градусов, сосредоточьтесь на скручивании.<br>● Опустите ноги в начальное положение. Контролируйте спуск.<br>● Не используя раскачку - повторите движение.<br>',
    url : 'https://t.me/swtBarBosS/2937'
  }
  
  let exercise_2 = {
    name : "Отжимания от столба",
    type : "Отжимания",
    img : "img/exercises/exercise_2.png",
    difficult : 'Облегченное упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_3 = {
    name : "Приседания с упором икрами",
    type : "Ноги",
    img : "img/exercises/exercise_3.png",
    difficult : 'Облегченное упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_4 = {
    name : "Додо от столба/стены",
    type : "Разводки",
    img : "img/exercises/exercise_4.png",
    difficult : 'Облегченное упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_5 = {
    name : "Бег в упоре",
    type : "Скручивания",
    img : "img/exercises/exercise_5.png",
    difficult : 'Облегченное упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

// Базовые упражнения

  let exercise_6 = {
    name : "Австралийские подтягивания",
    type : "Подтягивания",
    img : "img/exercises/exercise_6.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_7 = {
    name : 'Отжимания "Руки выше ног"',
    type : "Отжимания",
    img : "img/exercises/exercise_7.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_8 = {
    name : 'Зашагивания',
    type : "Ноги",
    img : "img/exercises/exercise_21.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_9 = {
    name : 'Додо от наклонной поверхности',
    type : "Разводки",
    img : "img/exercises/exercise_9.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_10 = {
    name : 'Скручивания',
    type : "Скручивания",
    img : "img/exercises/exercise_10.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_11 = {
    name : 'Подтягивания "Австралийский тюлень"',
    type : "Подтягивания",
    img : "img/exercises/exercise_11.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_12 = {
    name : 'Отжимания от пола',
    type : "Отжимания",
    img : "img/exercises/exercise_12.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_13 = {
    name : 'Приседания',
    type : "Ноги",
    img : "img/exercises/exercise_8.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_14 = {
    name : 'Подъёмы коленей до груди в висе/упоре на брусьях',
    type : "Скручивания",
    img : "img/exercises/exercise_14.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_15 = {
    name : 'Подтягивания',
    type : "Подтягивания",
    img : "img/exercises/exercise_15.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_16 = {
    name : 'Отжимания "Руки выше ног"',
    type : "Отжимания",
    img : "img/exercises/exercise_16.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_17 = {
    name : 'Выпады',
    type : "Ноги",
    img : "img/exercises/exercise_13.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_18 = {
    name : 'Подъёмы ног выше уголка в висе/упоре на брусьях',
    type : "Скручивания",
    img : "img/exercises/exercise_18.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_19 = {
    name : "Австралийские подтягивания на бицепс ложным нижним хватом",
    type : "Подтягивания",
    img : "img/exercises/exercise_19.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_20 = {
    name : "Отжимания на брусьях",
    type : "Отжимания",
    img : "img/exercises/exercise_20.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_21 = {
    name : 'Подъёмы на носки двумя ногами',
    type : "Ноги",
    img : "img/exercises/exercise_17.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_22 = {
    name : 'Боковые скручивания с согнутыми ногами в висе/упоре на брусьях',
    type : "Скручивания",
    img : "img/exercises/exercise_22.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_23 = {
    name : 'Высокие подтягивания',
    type : "Подтягивания",
    img : "img/exercises/exercise_23.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_24 = {
    name : 'Отжимания "Нырок щуки"',
    type : "Отжимания",
    img : "img/exercises/exercise_24.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_25 = {
    name : 'Подъёмы на носки одной ногой',
    type : "Ноги",
    img : "img/exercises/exercise_25.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_26 = {
    name : 'Подъёмы ног как можно выше в висе/упоре на брусьях',
    type : "Скручивания",
    img : "img/exercises/exercise_26.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_27 = {
    name : 'Подтягивания со сведением лопаток',
    type : "Подтягивания",
    img : "img/exercises/exercise_27.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_28 = {
    name : 'Французские отжимания',
    type : "Отжимания",
    img : "img/exercises/exercise_28.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_29 = {
    name : 'Сгибания на заднюю поверхность бедра с помощью рук',
    type : "Ноги",
    img : "img/exercises/exercise_29.png",
    difficult : 'Базовое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_30 = {
    name : 'Боковые подъёмы ног как можно выше в висе/в упоре на брусьях',
    type : "Скручивания",
    img : "img/exercises/exercise_30.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_31 = {
    name : 'Подтягивания "Австралийский тюлень" на заднюю дельту',
    type : "Подтягивания",
    img : "img/exercises/exercise_31.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_32 = {
    name : 'Отжимания на брусьях в группировке',
    type : "Отжимания",
    img : "img/exercises/exercise_32.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }

  let exercise_33 = {
    name : 'Болгарские приседания',
    type : "Ноги",
    img : "img/exercises/exercise_33.png",
    difficult : 'Продвинутое упражнение',
    url : 'https://t.me/swtBarBosS/2937'
  }





  let allExerciseBase = [exercise_1, exercise_2, exercise_3, exercise_4, exercise_5, exercise_6, exercise_7, exercise_8, exercise_9,
    exercise_10, exercise_11, exercise_12, exercise_13, exercise_14, exercise_15, exercise_16, exercise_17, exercise_18, exercise_19,
    exercise_20, exercise_21, exercise_22, exercise_23, exercise_24, exercise_25, exercise_26, exercise_27, exercise_28, exercise_29,
    exercise_30, exercise_31, exercise_32, exercise_33,]


// Фунации для секции База Упражнений
        
// Добавление всех упражнений из массива allExercises на страницу База Упражнений
            // Получаем элемент списка, куда будут добавляться упражнения
            const ExercisesListExercisesList = document.getElementById('exercisesBase-screen-exercisesList');

            // Функция для определения дополнительного класса для nameBox в зависимости от типа упражнения
            function getTypeClass(exerciseType) {
            switch (exerciseType) {
                case "Подтягивания":
                return "exercisesBase-screen-exercisesList-item-text-nameBox-pullExercises";
                case "Отжимания":
                return "exercisesBase-screen-exercisesList-item-text-nameBox-pushExercises";
                case "Ноги":
                return "exercisesBase-screen-exercisesList-item-text-nameBox-legsExercises";
                case "Разводки":
                return "exercisesBase-screen-exercisesList-item-text-nameBox-flyExercises";
                case "Скручивания":
                return "exercisesBase-screen-exercisesList-item-text-nameBox-curlExercises";
                default:
                return "";
            }
            }

            // Функция для определения дополнительного класса для кнопки в зависимости от типа упражнения
            function getButtonClass(exerciseType) {
            switch (exerciseType) {
                case "Подтягивания":
                return "exercisesBase-screen-exercisesList-item-text-button-pullExercises";
                case "Отжимания":
                return "exercisesBase-screen-exercisesList-item-text-button-pushExercises";
                case "Ноги":
                return "exercisesBase-screen-exercisesList-item-text-button-legsExercises";
                case "Разводки":
                return "exercisesBase-screen-exercisesList-item-text-button-flyExercises";
                case "Скручивания":
                return "exercisesBase-screen-exercisesList-item-text-button-curlExercises";
                default:
                return "";
            }
            }

            // Функция для очистки контейнера перед добавлением новых элементов
            function clearExerciseList() {
            ExercisesListExercisesList.replaceChildren();
            }

    // Функция для добавления упражнений в список
    function renderExercises(exercises) {
    // Сначала очищаем контейнер
    clearExerciseList();

    exercises.forEach(exercise => {
        // Создаем новый элемент <li>
        const exerciseItem = document.createElement('li');
        exerciseItem.className = 'exercisesBase-screen-exercisesList-item';

        // Создаем контейнер для текста
        const textDiv = document.createElement('div');
        textDiv.className = 'exercisesBase-screen-exercisesList-item-text';

        // Создаем элемент для названия упражнения
        const nameBox = document.createElement('div');
        nameBox.className = 'exercisesBase-screen-exercisesList-item-text-nameBox';
        
        // Добавляем класс для nameBox в зависимости от типа упражнения
        const additionalNameClass = getTypeClass(exercise.type);
        if (additionalNameClass) {
        nameBox.classList.add(additionalNameClass);
        }
        
        const nameElement = document.createElement('h3');
        nameElement.className = 'exercisesBase-screen-exercisesList-item-text-name';
        nameElement.textContent = exercise.name;
        nameBox.appendChild(nameElement);

        const lineDiv = document.createElement('div');
        lineDiv.className = 'exercisesBase-screen-exercisesList-item-text-line';

        const typeElement = document.createElement('h4');
        typeElement.className = 'exercisesBase-screen-exercisesList-item-text-type';
        typeElement.textContent = exercise.type;

        const difficultElement = document.createElement('h4');
        difficultElement.className = 'exercisesBase-screen-exercisesList-item-text-difficult';
        difficultElement.textContent = exercise.difficult;

        // Создаем кнопку "Подробней" в виде ссылки
        const buttonElement = document.createElement('button');
        buttonElement.className = 'exercisesBase-screen-exercisesList-item-text-button';
        
        // Добавляем класс для кнопки в зависимости от типа упражнения
        const additionalButtonClass = getButtonClass(exercise.type);
        if (additionalButtonClass) {
        buttonElement.classList.add(additionalButtonClass);
        }
        
        // Устанавливаем ссылку на кнопку
        buttonElement.onclick = () => navButtonForward();
        buttonElement.textContent = 'Подробней';
        // Устанавливаем действия при нажатии на кнопку
        buttonElement.addEventListener("click", exercisesBaseAboutExerciseButton)

        // Добавляем все текстовые элементы в контейнер
        textDiv.appendChild(nameBox);
        textDiv.appendChild(lineDiv);
        textDiv.appendChild(typeElement);
        textDiv.appendChild(difficultElement);
        textDiv.appendChild(buttonElement);

        const imgBox = document.createElement('div');
        imgBox.className = 'exercisesBase-screen-exercisesList-item-imgBox';
        const imgElement = document.createElement('img');
        imgElement.className = 'exercisesBase-screen-exercisesList-item--imgBox-img';
        imgElement.src = exercise.img;
        imgElement.alt = exercise.name;
        imgBox.appendChild(imgElement);

        exerciseItem.appendChild(textDiv);
        exerciseItem.appendChild(imgBox);
        ExercisesListExercisesList.appendChild(exerciseItem);
    });
    }

    // Очистка и рендеринг упражнений
    clearExerciseList();
    renderExercises(allExerciseBase);



// Скрытие и показ фильтра упражнений при прокрутке
    document.addEventListener('DOMContentLoaded', function () {
    const listElement = document.querySelector('#exercisesBase-screen-exercisesList');
    const difficultButtons = document.querySelector('#exercisesBase-screen-difficultSortButtons');
    const typeButtons = document.querySelector('#exercisesBase-screen-typeSortButtons');
  
    if (!listElement || !difficultButtons || !typeButtons) return;
  
    let lastScrollTop = 0;
  
    listElement.addEventListener('scroll', function () {
      const currentScrollTop = listElement.scrollTop;
  
      if (currentScrollTop > lastScrollTop) {
        // Скролл вниз — скрыть кнопки
        difficultButtons.style.display = 'none';
        typeButtons.style.display = 'none';
        listElement.style.gridRowStart = 3;
        listElement.style.gridRowEnd = 6;
            const itemHeight = document.querySelector('.exercisesBase-screen-exercisesList-item').offsetHeight;
        listElement.style.paddingTop = itemHeight + 'px';
        listElement.style.paddingBottom = itemHeight + 'px';
      } else {
        // Скролл вверх — показать кнопки
        difficultButtons.style.display = 'flex';
        typeButtons.style.display = 'flex';
        listElement.style.gridRowStart = 5;
        listElement.style.gridRowEnd = 6;
        listElement.style.paddingTop = '0px';
      }
  
      lastScrollTop = currentScrollTop;
    });
  });
  






  // Функция для применения фильтра по сложности
function filterByDifficulty(exercise, selectedDifficulty) {
    return selectedDifficulty === "" || exercise.difficult === selectedDifficulty;
  }
  
  // Функция для применения фильтра по типу упражнения
  function filterByType(exercise, selectedType) {
    return selectedType === "" || exercise.type === selectedType;
  }
  
  // Функция для отображения упражнений в соответствии с фильтрами
  function renderFilteredExercises(exercises, selectedDifficulty, selectedType) {
    const filteredExercises = exercises.filter(exercise =>
      filterByDifficulty(exercise, selectedDifficulty) &&
      filterByType(exercise, selectedType)
    );
  
    // Очистить и заново отобразить упражнения (реализовать вашу логику отображения)
    clearExerciseList();
    renderExercises(filteredExercises);
  }
  
  // Обработчик для кнопок фильтра по сложности
  const difficultyButtons = document.querySelectorAll('#exercisesBase-screen-difficultSortButtons button');
  let selectedDifficulty = ""; // Хранит выбранную сложность (пусто, если нет фильтра)
  
  difficultyButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Если нажата та же кнопка, сбрасываем фильтрацию
      if (selectedDifficulty === button.dataset.difficulty) {
        selectedDifficulty = ""; // Сбрасываем фильтр
        button.classList.remove('active');
      } else {
        selectedDifficulty = button.dataset.difficulty; // Применяем новый фильтр
        // Сбрасываем активные классы на всех кнопках
        difficultyButtons.forEach(b => b.classList.remove('active'));
        button.classList.add('active'); // Добавляем активный класс
      }
      
      // Применяем фильтрацию
      renderFilteredExercises(allExerciseBase, selectedDifficulty, selectedType);
    });
  });
  
  // Обработчик для кнопок фильтра по типу движения
  const typeButtons = document.querySelectorAll('#exercisesBase-screen-typeSortButtons button');
  let selectedType = ""; // Хранит выбранный тип упражнения (пусто, если нет фильтра)
  
  typeButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Если нажата та же кнопка, сбрасываем фильтрацию
      if (selectedType === button.dataset.type) {
        selectedType = ""; // Сбрасываем фильтр
        button.classList.remove('active');
      } else {
        selectedType = button.dataset.type; // Применяем новый фильтр
        // Сбрасываем активные классы на всех кнопках
        typeButtons.forEach(b => b.classList.remove('active'));
        button.classList.add('active'); // Добавляем активный класс
      }
      
      // Применяем фильтрацию
      renderFilteredExercises(allExerciseBase, selectedDifficulty, selectedType);
    });
  });
  
  // Инициализация data-атрибутов для кнопок
  difficultyButtons[0].dataset.difficulty = "Облегченное упражнение";
  difficultyButtons[1].dataset.difficulty = "Базовое упражнение";
  difficultyButtons[2].dataset.difficulty = "Продвинутое упражнение";
  
  typeButtons[0].dataset.type = "Подтягивания";
  typeButtons[1].dataset.type = "Отжимания";
  typeButtons[2].dataset.type = "Разводки";
  typeButtons[3].dataset.type = "Скручивания";
  typeButtons[4].dataset.type = "Ноги";











// Хранение текущих фильтров и поискового запроса
let searchQuery = "";

// Функция для применения поиска по названию
function filterBySearch(exercise, searchQuery) {
  return exercise.name.toLowerCase().includes(searchQuery.toLowerCase());
}

// Функция для отображения упражнений с учетом фильтров и поиска
function renderFilteredExercises(exercises) {
  // Применяем фильтрацию по сложности и типу
  const filteredExercises = exercises.filter(exercise =>
    filterByDifficulty(exercise, selectedDifficulty) &&
    filterByType(exercise, selectedType) &&
    filterBySearch(exercise, searchQuery) // Применяем фильтр поиска
  );

  // Очистить и заново отобразить упражнения (реализовать вашу логику отображения)
  clearExerciseList();
  renderExercises(filteredExercises);
}

// Обработчик для поля ввода поиска
const searchInput = document.getElementById('exercisesBase-screen-searchForm-input');
searchInput.addEventListener('input', (event) => {
  searchQuery = event.target.value; // Сохраняем текущий запрос
  renderFilteredExercises(allExerciseBase); // Перерисовываем список с учетом фильтров и поиска
});












// функция exercisesBase-aboutExercise-button, которая заполняет DOM exercise-screen в зависимости от названия упражнения, на котором была нажата кнопка "Подробнее":

function exercisesBaseAboutExerciseButton(event) {
  const exerciseName = event.target.closest(".exercisesBase-screen-exercisesList-item").querySelector(".exercisesBase-screen-exercisesList-item-text-name").textContent.trim();

  const exercise = allExerciseBase.find(ex => ex.name === exerciseName);

  if (!exercise) {
    console.error("Упражнение не найдено!");
    return;
  }

  // Заполнение данных в exercise-screen
  document.querySelector(".exercise-screen-infoBlock-nameBox-text").textContent = exercise.name;
  document.querySelector(".exercise-screen-infoBlock-etc-imgBox-img").src = exercise.img;
  document.querySelector(".exercise-screen-infoBlock-etc-VideoURL").href = exercise.url;
  document.querySelector("#exercise-screen-infoBlock-etc-disc-motionType-name").textContent = exercise.type;
  document.querySelector("#exercise-screen-infoBlock-etc-disc-difficultType-name").textContent = exercise.difficult;
  document.querySelector("#exercise-screen-infoBlock-etc-disc-equipmentType-name").textContent = exercise.equipment;
  
  // Заполнение активных мышц
  const svgContainer = document.querySelector("#exercise-screen-muscleBlock-muscleBox-allMuscle-svg-activeMusclels");
  svgContainer.innerHTML = exercise.musclels;

  // Заполнение описания
  document.querySelector(".exercise-screen-about-text").innerHTML = exercise.about;
}